<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NB36 • Diagram</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-white text-slate-900">
    <header class="sticky top-0 z-10 border-b border-slate-200 bg-white/80 backdrop-blur">
      <div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-3 md:px-6">
        <a href="/" class="inline-flex items-center gap-2 text-sm font-semibold text-emerald-700 hover:text-emerald-800">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-lg bg-emerald-600 text-white">N</span>
          NB36 Home
        </a>
        <div class="text-sm text-slate-500">System Diagram</div>
      </div>
    </header>

    <main class="mx-auto max-w-7xl px-4 py-8 md:px-6">
      <div class="mx-auto max-w-2xl text-center">
        <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">System Archticture</h1>
        <p class="mt-3 text-slate-600">Diagram flowchart and integration overview.</p>
      </div>

      <div class="mx-auto mt-8 w-full max-w-7xl">
        <div class="relative w-full h-[75vh]">
          <iframe
            title="Whimsical Diagram"
            src="https://whimsical.com/embed/8Ltqc3qKobn9iBwaveaoQn"
            class="absolute left-0 top-0 h-full w-full rounded-xl border-0 shadow-md"
            allowfullscreen
            style="border:none"
          ></iframe>
        </div>
      </div>

      <!-- Explanatory copy under the diagram -->
      <section class="mx-auto mt-20 w-full max-w-3xl px-4 md:px-6 lg:px-8 text-slate-900">
        <h2 class="text-2xl font-bold tracking-tight">How this demo works</h2>
        <div class="mt-4 space-y-6 text-[17px] sm:text-lg leading-relaxed">
          <p>This demo shows an end‑to‑end KYC decisioning loop with a thin UI, a stateful backend (NB36), and a policy‑driven orchestration layer (Taktile). The frontend’s only job is to collect the applicant’s information and submit a single POST to the backend. Everything interesting happens behind that request: NB36 turns the submission into a case, calls a Taktile workflow that runs the checks, and then relays a single, human‑readable decision back to the UI.</p>
          <p>When the user submits the form, NB36 normalizes the inputs into a compact payload: name, DOB, government ID type/number, email and phone, and a postal address (with optional apartment/unit). For the demo, NB36 may also add custom_fields that shape mocked outcomes (such as a forced scenario or income coverage months). NB36 either creates a new case or reopens an existing one, stamps the submission with a case_id and timestamps, and records the raw request for audit. That case_id becomes the thread that ties together the submission, the orchestration request, and the final decision.</p>
          <p>NB36 then delegates to Taktile by posting the normalized payload to a KYC workflow. You can think of this workflow as a small pipeline: “S” (service) stages fetch signals, while “T” (decision) stages turn those signals into simple outcomes. The S‑stages produce normalized facts such as “<span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">AML: PROCEED</span>”, “<span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">Fraud: FRAUD_PASS with score 17.36</span>”, “<span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">Credit: CREDIT_PASS with bureau tier 7</span>”, or “<span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">Income: INCOME_PASS with coverage 12 and a computed credit_limit</span>”. The T‑stages then evaluate those facts against policy. In this demo the policy is intentionally straightforward: a T‑stage returns <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">PASS</span> if its corresponding signals meet thresholds, <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">DECLINE</span> if they clearly violate policy, and <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">REVIEW</span> when the signals are inconclusive or conflicting. The workflow short‑circuits on <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">DECLINE</span> or <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">REVIEW</span> (there’s no need to run later checks if a previous T‑stage has already decisively stopped the journey), but otherwise it proceeds through AML, Fraud, Credit, and Income.</p>
          <p>Two things matter most for the user‑facing outcome: the category decision and the commercial terms. The category decision is the overall <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">PASS</span> / <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">DECLINE</span> / <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">REVIEW</span> computed by the workflow’s T‑stages. The commercial terms are the <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">final_tier</span> and the <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">credit_limit</span> returned with the decision. The tier is a compact way of describing eligibility; in this demo it is derived as a conservative composition of the dimension‑specific tiers (for example, taking the minimum across dimensions), while the credit limit comes from the income decision and reflects the applicant’s affordability under policy. Taktile ships all of that back to NB36 as a single JSON document along with the per‑check decisions so you can see how the conclusion was reached.</p>
          <p>On receiving that document, NB36 appends it to the case timeline, including the request/response bodies and timing data so an analyst can reconstruct the decision path later. If, for any reason, orchestration is unavailable, NB36 still preserves the case and can return a safe <span class="bg-yellow-100 px-1 rounded font-mono text-slate-900">REVIEW</span> outcome rather than losing the application. The same case_id that NB36 created at submission time is included in the response so the UI, logs, and any analyst tools can refer to the same record. The frontend displays just the essentials: an approval or non‑eligibility headline, the formatted credit limit, the Tier number, and four labeled checks with simple icons. The full JSON is available behind an expandable “Technical details” section for anyone who wants to look under the hood.</p>
          <p>In short, the division of responsibilities is deliberate. The UI remains simple and interchangeable. NB36 anchors traceability, case management, and resilience. Taktile encapsulates the policy: it ingests normalized signals, evaluates clear criteria in T‑stages, short‑circuits when appropriate, and returns a single outcome with user‑visible terms. This makes the system both explainable—because every step is logged and the final payload tells you why—and adaptable, because the workflow stages and thresholds can evolve without breaking the UI contract or the backend endpoint.</p>
        </div>
      </section>
    </main>
  </body>
</html>
